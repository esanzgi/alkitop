import{j as e,r as a}from"./app-90a17816.js";import{F}from"./Footer-5b20baa8.js";import{M as l,B as j,F as t,H as N}from"./Header-dc5f5bb6.js";import{P as M}from"./Products-107aaeb8.js";import{F as v}from"./Icons-4328b1fd.js";import"./logotxuria-896ba0d6.js";import"./index.es-e2752bc1.js";import"./ProductCard-ef1e8260.js";import"./constants-778ff7d1.js";function y(){return e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2 mt-5","aria-hidden":"true"}),e.jsx("span",{role:"status",children:"Cargando..."})]})}function w(){const s={min:0,max:150},r=s.min+(s.max-s.min)/2;return e.jsx("input",{type:"range",min:s.min,max:s.max,defaultValue:r})}const C=({show:s,handleClose:r})=>{const c=()=>{r()};return e.jsxs(l,{show:s,onHide:r,centered:!0,size:"lg",children:[e.jsxs(l.Header,{children:[e.jsx(l.Title,{className:"text-center",children:"Filtros"}),e.jsx(j,{variant:"close",onClick:r})]}),e.jsx(l.Body,{children:e.jsxs(t,{children:[e.jsxs(t.Group,{controlId:"fechaDesde",children:[e.jsx(t.Label,{children:"Fecha Desde:"}),e.jsx(t.Control,{type:"date"})]}),e.jsxs(t.Group,{controlId:"fechaHasta",children:[e.jsx(t.Label,{children:"Fecha Hasta:"}),e.jsx(t.Control,{type:"date"})]}),e.jsxs(t.Group,{controlId:"precioMin",children:[e.jsx(t.Label,{children:"Precio Mínimo:"}),e.jsx(w,{})]}),e.jsxs(t.Group,{controlId:"precioMax",children:[e.jsx(t.Label,{children:"Precio Máximo:"}),e.jsx(t.Control,{type:"number"})]})]})}),e.jsxs(l.Footer,{children:[e.jsx(j,{variant:"success",onClick:c,children:"Aplicar"}),e.jsx(j,{variant:"secondary",children:"Resetear Filtros"})]})]})},H=(s,r)=>{const[c,o]=a.useState(!0),[d,u]=a.useState(null),[m,p]=a.useState([]),[n,h]=a.useState(r),[x,P]=a.useState(null);return a.useEffect(()=>{(async()=>{try{o(!0);const i=await fetch(`/api/products/?search=${s}&page=${n}`);if(!i.ok)throw new Error(`Error al cargar productos. Código HTTP: ${i.status}`);const f=await i.json();p(b=>[...b,...f.data]),P(f.last_page),o(!1)}catch(i){u(i),o(!1)}})()},[s,n]),{loading:c,error:d,products:m,currentPage:n,totalPages:x,loadNextPage:()=>{n<x&&h(g=>g+1)}}};function A({search:s,page:r}){const[c,o]=a.useState(!1),{loading:d,products:u,currentPage:m,totalPages:p,loadNextPage:n}=H(s,1),h=()=>{o(!0)},x=()=>{o(!1)};return e.jsxs("main",{className:"",children:[e.jsx("div",{className:"fixed-top bg-white",children:e.jsx(N,{})}),e.jsxs("div",{className:"home-content container pb-5",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("span",{className:"fs-2",children:["Resultados para la búsqueda: ",e.jsx("strong",{className:"fst-italic",children:s})]}),e.jsx(v,{handleOpenModal:h})]}),d?e.jsx(y,{}):e.jsxs("div",{className:"text-center",children:[e.jsx(M,{products:u}),m<p&&e.jsx("button",{onClick:n,disabled:d,className:"btn btn-success mt-5 px-4",children:"Gehiago ikusi"})]})]}),e.jsx(C,{show:c,handleClose:x}),e.jsx("div",{className:"mt-5 pt-5 bg-light border-top",children:e.jsx("div",{className:"container-md",children:e.jsx(F,{})})})]})}export{A as default};
