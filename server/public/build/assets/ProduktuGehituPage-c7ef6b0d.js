import{r as x,j as e,W as z,u as O}from"./app-90a17816.js";import{u as T,o as A,q as U,r as K,s as B}from"./index.es-e2752bc1.js";import{F as _}from"./Footer-5b20baa8.js";import{u as H,S as k,N as V,m as R,d as W,c as M,q as X,F as r,B as E,H as Y}from"./Header-dc5f5bb6.js";import"./index-b67daa84.js";/* empty css              */import"./Icons-4328b1fd.js";import{a as J}from"./constants-778ff7d1.js";import{N as Q,T as Z,u as ee}from"./NavItem-3ef645da.js";import"./logotxuria-896ba0d6.js";const te=["as","onSelect","activeKey","role","onKeyDown"];function oe(o,i){if(o==null)return{};var d={},t=Object.keys(o),s,l;for(l=0;l<t.length;l++)s=t[l],!(i.indexOf(s)>=0)&&(d[s]=o[s]);return d}const w=()=>{},L=W("event-key"),S=x.forwardRef((o,i)=>{let{as:d="div",onSelect:t,activeKey:s,role:l,onKeyDown:p}=o,g=oe(o,te);const c=H(),n=x.useRef(!1),a=x.useContext(k),h=x.useContext(Z);let v,C;h&&(l=l||"tablist",s=h.activeKey,v=h.getControlledId,C=h.getControllerId);const f=x.useRef(null),b=u=>{const m=f.current;if(!m)return null;const I=X(m,`[${L}]:not([aria-disabled=true])`),y=m.querySelector("[aria-selected=true]");if(!y||y!==document.activeElement)return null;const P=I.indexOf(y);if(P===-1)return null;let j=P+u;return j>=I.length&&(j=0),j<0&&(j=I.length-1),I[j]},N=(u,m)=>{u!=null&&(t==null||t(u,m),a==null||a(u,m))},q=u=>{if(p==null||p(u),!h)return;let m;switch(u.key){case"ArrowLeft":case"ArrowUp":m=b(-1);break;case"ArrowRight":case"ArrowDown":m=b(1);break;default:return}m&&(u.preventDefault(),N(m.dataset[M("EventKey")]||null,u),n.current=!0,c())};x.useEffect(()=>{if(f.current&&n.current){const u=f.current.querySelector(`[${L}][aria-selected=true]`);u==null||u.focus()}n.current=!1});const F=T(i,f);return e.jsx(k.Provider,{value:N,children:e.jsx(V.Provider,{value:{role:l,activeKey:R(s),getControlledId:v||w,getControllerId:C||w},children:e.jsx(d,Object.assign({},g,{onKeyDown:q,ref:F,role:l}))})})});S.displayName="Nav";const ne=Object.assign(S,{Item:Q}),$=x.forwardRef(({bsPrefix:o,active:i,disabled:d,eventKey:t,className:s,variant:l,action:p,as:g,...c},n)=>{o=A(o,"list-group-item");const[a,h]=ee({key:R(t,c.href),active:i,...c}),v=U(f=>{if(d){f.preventDefault(),f.stopPropagation();return}a.onClick(f)});d&&c.tabIndex===void 0&&(c.tabIndex=-1,c["aria-disabled"]=!0);const C=g||(p?c.href?"a":"button":"div");return e.jsx(C,{ref:n,...c,...a,onClick:v,className:K(s,o,h.isActive&&"active",d&&"disabled",l&&`${o}-${l}`,p&&`${o}-action`)})});$.displayName="ListGroupItem";const ae=$,D=x.forwardRef((o,i)=>{const{className:d,bsPrefix:t,variant:s,horizontal:l,numbered:p,as:g="div",...c}=B(o,{activeKey:"onSelect"}),n=A(t,"list-group");let a;return l&&(a=l===!0?"horizontal":`horizontal-${l}`),e.jsx(ne,{ref:i,...c,as:g,className:K(d,n,s&&`${n}-${s}`,a&&`${n}-${a}`,p&&`${n}-numbered`)})});D.displayName="ListGroup";const G=Object.assign(D,{Item:ae}),re=()=>{var c;const{data:o,setData:i,post:d,errors:t}=z({name:"",description:"",images:[],isEco:!1,price:"",location:"",category:"",frequency:""}),s=n=>{const{name:a,value:h}=n.target;i(a,h)},l=n=>{const a=Array.from(n.target.files);i("images",[...o.images,...a])},p=async n=>{n.preventDefault();try{d("/produktua-sartu",{onSuccess:()=>{console.log("Formulario enviado con éxito")},onError:a=>{console.error("Error al enviar el formulario:",a)}})}catch(a){console.error("Error:",a.message)}},g=n=>{const a=o.images.filter((h,v)=>v!==n);i("images",a)};return e.jsxs(r,{onSubmit:p,encType:"multipart/form-data",children:[e.jsxs(r.Group,{controlId:"formProductName",children:[e.jsx(r.Label,{children:"Produktuaren izena:"}),e.jsx(r.Control,{type:"text",placeholder:"Ingrese el nombre del producto",name:"name",value:o.name,onChange:s,isInvalid:!!(t!=null&&t.name)})]}),e.jsxs(r.Group,{controlId:"formProductDescription",children:[e.jsx(r.Label,{children:"Deskripzioa:"}),e.jsx(r.Control,{as:"textarea",placeholder:"Ingrese la descripción del producto",name:"description",value:o.description,onChange:s,isInvalid:!!(t!=null&&t.description)})]}),e.jsxs(r.Group,{controlId:"formProductPrice",children:[e.jsx(r.Label,{children:"Precio"}),e.jsx(r.Control,{type:"text",placeholder:"Ingrese el precio del producto",name:"price",value:o.price,onChange:s,isInvalid:!!(t!=null&&t.price)})]}),e.jsxs(r.Group,{controlId:"formProductFrequency",children:[e.jsx(r.Label,{children:"Frecuencia"}),e.jsxs(r.Control,{as:"select",name:"frequency",value:o.frequency,onChange:s,isInvalid:!!(t!=null&&t.frequency),children:[e.jsx("option",{value:"",children:"Aukeratu"}),e.jsx("option",{value:"daily",children:"Egunero"}),e.jsx("option",{value:"weekly",children:"Astero"}),e.jsx("option",{value:"monthly",children:"Hilero"})]})]}),e.jsx(r.Group,{controlId:"formProductIsEco",children:e.jsx(r.Check,{type:"checkbox",label:"Producto Ecológico",name:"isEco",checked:o.isEco,onChange:n=>i("isEco",n.target.checked),isInvalid:!!(t!=null&&t.isEco)})}),e.jsxs(r.Group,{controlId:"formProductLocation",children:[e.jsx(r.Label,{children:"Ubicación"}),e.jsx(r.Control,{type:"text",placeholder:"Ingrese la ubicación del producto",name:"location",value:o.location,onChange:s,isInvalid:!!(t!=null&&t.location)})]}),e.jsxs(r.Group,{controlId:"formProductCategory",children:[e.jsx(r.Label,{children:"Categoría"}),e.jsxs(r.Control,{as:"select",name:"category",value:o.category,onChange:s,isInvalid:!!(t!=null&&t.category),children:[e.jsx("option",{value:"",children:"Aukeratu"}),(c=J)==null?void 0:c.map((n,a)=>e.jsx("option",{value:n,children:n},a))]})]}),e.jsxs(r.Group,{controlId:"formProductImages",children:[e.jsx(r.Label,{children:"Imágenes"}),e.jsx(r.Control,{type:"file",name:"images",multiple:!0,onChange:l,accept:"image/*",isInvalid:!!(t!=null&&t.images)})]}),o.images.length>0&&e.jsx(G,{className:"mt-3",children:o.images.map((n,a)=>e.jsxs(G.Item,{className:"d-flex justify-content-between",children:[e.jsx("span",{children:n.name}),e.jsx(E,{variant:"outline-danger",size:"sm",className:"float-right",onClick:()=>g(a),children:"X"})]},a))}),e.jsx(E,{variant:"primary",type:"submit",children:"Subir Producto"})]})};function se({show:o,handleClose:i}){return e.jsx("div",{children:e.jsx(re,{})})}function ge({user:o,owner:i}){const{loggedUser:d,login:t,logout:s}=O();return t(o),e.jsxs("main",{className:"",children:[e.jsx("div",{className:"fixed-top bg-white",children:e.jsx(Y,{user:o,owner:i})}),e.jsx("div",{className:"home-content container pb-5",children:e.jsx(se,{})}),e.jsx("div",{className:"mt-5 pt-5 bg-light border-top",children:e.jsx("div",{className:"container-md",children:e.jsx(_,{})})})]})}export{ge as default};
